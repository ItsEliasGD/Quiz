@{
    Layout = "_Layout";
    ViewData["Title"] = "Quizzes";

    @model int;
}

<div id="app" class="container mt-5">
    <button class="btn btn-primary btn-lg" @@click="createMode = true">Agregar +</button>
    <div class="card">
        <div class="card-header">
            <h2>Quizzes</h2>
        </div>
        <div class="card-body">
            <table id="table" class="table table-striped">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Status</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody v-for="quiz in quizzes">
                    <tr>
                        <td>{{ quiz.Name }}</td>
                        <td>{{ quiz.Description }}</td>
                        <td>{{ quiz.Status }}</td>
                        <td>
                            <div>
                                <button class="btn btn-primary" @@click="editToggle(quiz)">Editar</button>
                                <button class="btn btn-danger" @@click="deleteQuiz(quiz)">Eliminar</button>
                                <button class="btn btn-info" @@click="viewQuestions(quiz)">Preguntas</button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div v-if="createMode || editMode" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-2xl shadow-lg w-full max-w-md p-6">
            <h2 class="text-xl font-bold mb-4">Quiz</h2>

            <form>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-1">Nombre del Quiz</label>
                    <input type="text"
                           v-model="quiz.Name"
                           class="w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300"
                           required />
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 mb-1">Descripción</label>
                    <textarea v-model="quiz.Description"
                        class="w-full border rounded px-3 py-2 h-24 resize-none focus:outline-none focus:ring focus:border-blue-300"></textarea>
                </div>

                <div class="flex justify-end space-x-3">
                    <button @@click="createMode = false" type="button" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancelar</button>
                    <button v-if="createMode" @@click="createQuiz()" type="submit" class="btn btn-primary px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Crear +</button>
                    <button v-if="editMode" @@click="editQuiz()" type="submit" class="btn btn-primary px-4 py-2 bg-blue-600 rounded hover:bg-blue-700">Editar</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section scripts {
    <script>
        const userId = @Model;
        const Quizzes = "@Url.Action("GetQuizzes","Home")";
        const Create = "@Url.Action("CreateQuiz", "Home")";
        const Update = "@Url.Action("UpdateQuiz", "Home")";
        const Delete = "@Url.Action("DeleteQuiz", "Home")";
    </script>
    <script src="~/js/Quizzes.js" defer></script>
}